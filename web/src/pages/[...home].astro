---
import { getCollection } from "astro:content";
import { getSlugWithLang } from "@/translations/modules/getSlugWithLang";
import type { LANGUAGE, Languages } from "@/translations/domain/languages";
import Layout from "@/layouts/Layout.astro";
import Welcome from "@/components/Welcome.astro";
import SelectLang from "@/components/SelectLang.astro";
// Esta función genera las rutas estáticas para cada página de `homeBlog`
export async function getStaticPaths() {
    const data = await getCollection("homeBlog");

    const paths = data.map((page) => {

        const reference = page.data.ref;
        const dataOtherLangFiltered = data.filter((page) => page.data.ref === reference);

        const listLinks = dataOtherLangFiltered.map((page) => ({
            lang: page.data.lang,
            link: getSlugWithLang(page.data.slug, page.data.lang),
        }));
            
        return {
            params: {
                home: `${getSlugWithLang(page.data.slug, page.data.lang)}`,
            },
            props: {
                data: page.data,
                listLinks,
            },
        }
    }
    );
    console.log('Generated paths:', paths);
    return paths;
}

const { data, listLinks } = Astro.props;
const { home } = Astro.params;




---
<Layout>

<SelectLang listLinks={listLinks}/>


<pre>
    <code>
        listLinks: {JSON.stringify(listLinks, null, 2)}
    </code>
</pre>
<Welcome title={data.lang} />



</Layout>
