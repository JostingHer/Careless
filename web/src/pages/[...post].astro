---
import { getCollection } from "astro:content";
import { getSlugWithLang } from "@/translations/modules/getSlugWithLang";
import Layout from "@/layouts/Layout.astro";
import { ignores } from "eslint-plugin-prettier/recommended";
import Welcome from "@/components/Welcome.astro";
import NavBar from "@/components/NavBar.astro";
// Esta función genera las rutas estáticas para cada página de `homeBlog`
export async function getStaticPaths() {
    const postPages = await getCollection("postBlog") ;

    console.log('post pages:', postPages);  // Añadir un log para ver las páginas de `homeBlog`

    

    const paths = postPages.map((page) => {

        const reference = page.data.ref;
        const dataOtherLangFiltered = postPages.filter((page) => page.data.ref === reference);

        const listLinks = dataOtherLangFiltered.map((page) => ({
            lang: page.data.lang,
            link: getSlugWithLang(page.data.slug, page.data.lang),
        }));

                return {
                    params: {
                        post: `${getSlugWithLang(page.data.slug, page.data.lang)}`,
                    },
                    props: {
                        data: page.data,
                        listLinks
                      }
                 }
        });
    console.log('Generated paths posts:', paths);  // Añadir un log para ver las rutas generadas
    return paths;
}

const { data, listLinks } = Astro.props;
const { post } = Astro.params;



console.log('List links:', listLinks);

---
<Layout>
    <NavBar listLinks={listLinks}/>

    <pre>
        <code>
            listLinks: {JSON.stringify(data, null, 2)}
        </code>
    </pre>
    
    





</Layout>
